{"ast":null,"code":"import _objectSpread from\"/Users/chazcurlee/repos/projects/RSM/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/chazcurlee/repos/projects/RSM/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chazcurlee/repos/projects/RSM/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/chazcurlee/repos/projects/RSM/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useState,useEffect}from\"react\";import Button from\"@mui/material/Button\";import ReviewForm from\"./ReviewForm\";import TextField from\"@mui/material/TextField\";import Dialog from\"@mui/material/Dialog\";import DialogActions from\"@mui/material/DialogActions\";import DialogContent from\"@mui/material/DialogContent\";import DialogContentText from\"@mui/material/DialogContentText\";import DialogTitle from\"@mui/material/DialogTitle\";import\"../styles/Review.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Reviews=function Reviews(_ref){var brewery=_ref.brewery,reviews=_ref.reviews,toggle=_ref.toggle,setToggle=_ref.setToggle,rerend=_ref.rerend,setRerend=_ref.setRerend;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),editReview=_useState4[0],setEditReview=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),details=_useState6[0],setDetails=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),deleteToggle=_useState8[0],setDeleteToggle=_useState8[1];useEffect(function(){},[open]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var dlte;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"/api/review/\".concat(details));case 2:dlte=_context.sent;setToggle(!toggle);setToggle(!toggle);case 5:case\"end\":return _context.stop();}},_callee);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();var deleteOpen=function deleteOpen(e){var id=e.target.name;setDetails(id);console.log(details);setDeleteToggle(true);};var deleteClose=function deleteClose(){setDetails(\"\");setDeleteToggle(false);};var handleToggle=function handleToggle(){setToggle(true);};var handleOpen=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var id,rev;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:id=e.target.name;setDetails(id);_context2.next=4;return axios.get(\"/api/review/single/\".concat(id));case 4:rev=_context2.sent;setEditReview(rev.data);setOpen(true);console.log(editReview);case 8:case\"end\":return _context2.stop();}},_callee2);}));return function handleOpen(_x2){return _ref3.apply(this,arguments);};}();var handleClose=function handleClose(){setEditReview({title:\"\",user:\"\",body:\"\"});setDetails(\"\");setOpen(false);setRerend(!rerend);};var handleChange=function handleChange(e){var entry=e.target.value;switch(e.target.id){case\"title\":setEditReview(_objectSpread(_objectSpread({},editReview),{},{title:entry}));break;case\"body\":setEditReview(_objectSpread(_objectSpread({},editReview),{},{body:entry}));break;case\"user\":setEditReview(_objectSpread(_objectSpread({},editReview),{},{user:entry}));break;default:console.log(\"Review error\");break;}};var handleSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var post;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:console.log(details,editReview);_context3.next=3;return axios.put(\"/api/review/\".concat(details),{brewId:brewery.id,user:editReview.user,title:editReview.title,body:editReview.body});case 3:post=_context3.sent;console.log(post);handleClose();case 6:case\"end\":return _context3.stop();}},_callee3);}));return function handleSubmit(){return _ref4.apply(this,arguments);};}();//63c76b3a3e800409cc078b83\nreturn toggle?/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-container\",children:[/*#__PURE__*/_jsx(ReviewForm,{brewery:brewery,open:open,setOpen:setOpen,toggle:toggle,setToggle:setToggle}),reviews.map(function(review){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:review.title}),/*#__PURE__*/_jsx(\"h3\",{children:review.user}),/*#__PURE__*/_jsx(\"p\",{children:review.body}),/*#__PURE__*/_jsx(\"button\",{name:\"\".concat(review._id),onClick:handleOpen,children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{name:\"\".concat(review._id),onClick:deleteOpen,children:\"Delete\"}),/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,children:[/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",id:\"title\",label:\"Title\",InputLabelProps:{shrink:true},type:\"text\",fullWidth:true,variant:\"standard\",onChange:handleChange,required:true,value:editReview.title}),/*#__PURE__*/_jsx(TextField,{margin:\"dense\",id:\"user\",label:\"Name\",InputLabelProps:{shrink:true},type:\"text\",fullWidth:true,variant:\"standard\",onChange:handleChange,required:true,value:editReview.user}),/*#__PURE__*/_jsx(TextField,{margin:\"dense\",id:\"body\",label:\"Review\",InputLabelProps:{shrink:true},type:\"text\",fullWidth:true,variant:\"standard\",onChange:handleChange,required:true,value:editReview.body})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,children:\"Submit\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:deleteToggle,onClose:deleteClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Alert\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:\"Are you sure you want to delete this review?\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deleteClose();},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleDelete();},children:\"Confirm\"})]})]})]},review._id);})]}):/*#__PURE__*/_jsx(\"div\",{className:\"reviews-container\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setToggle(true);},children:\"See Reviews\"})});};export default Reviews;","map":{"version":3,"names":["axios","useState","useEffect","Button","ReviewForm","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Reviews","brewery","reviews","toggle","setToggle","rerend","setRerend","open","setOpen","editReview","setEditReview","details","setDetails","deleteToggle","setDeleteToggle","handleDelete","id","delete","dlte","deleteOpen","e","target","name","console","log","deleteClose","handleToggle","handleOpen","get","rev","data","handleClose","title","user","body","handleChange","entry","value","handleSubmit","put","brewId","post","map","review","_id","shrink"],"sources":["/Users/chazcurlee/repos/projects/RSM/client/src/components/Reviews.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport ReviewForm from \"./ReviewForm\";\nimport TextField from \"@mui/material/TextField\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport \"../styles/Review.css\";\n\nconst Reviews = ({\n  brewery,\n  reviews,\n  toggle,\n  setToggle,\n  rerend,\n  setRerend,\n}) => {\n  const [open, setOpen] = useState(false);\n  const [editReview, setEditReview] = useState({});\n  let [details, setDetails] = useState();\n  const [deleteToggle, setDeleteToggle] = useState(false);\n\n  useEffect(() => {}, [open]);\n\n  const handleDelete = async (id) => {\n    let dlte = await axios.delete(`/api/review/${details}`);\n    setToggle(!toggle);\n    setToggle(!toggle);\n  };\n\n  const deleteOpen = (e) => {\n    let id = e.target.name;\n    setDetails(id);\n    console.log(details);\n    setDeleteToggle(true);\n  };\n\n  const deleteClose = () => {\n    setDetails(\"\");\n    setDeleteToggle(false);\n  };\n\n  const handleToggle = () => {\n    setToggle(true);\n  };\n\n  const handleOpen = async (e) => {\n    let id = e.target.name;\n    setDetails(id);\n    let rev = await axios.get(`/api/review/single/${id}`);\n    setEditReview(rev.data);\n    setOpen(true);\n    console.log(editReview);\n  };\n\n  const handleClose = () => {\n    setEditReview({\n      title: \"\",\n      user: \"\",\n      body: \"\",\n    });\n    setDetails(\"\");\n    setOpen(false);\n    setRerend(!rerend);\n  };\n\n  const handleChange = (e) => {\n    let entry = e.target.value;\n    switch (e.target.id) {\n      case \"title\":\n        setEditReview({\n          ...editReview,\n\n          title: entry,\n        });\n        break;\n\n      case \"body\":\n        setEditReview({\n          ...editReview,\n\n          body: entry,\n        });\n        break;\n\n      case \"user\":\n        setEditReview({\n          ...editReview,\n          user: entry,\n        });\n        break;\n\n      default:\n        console.log(\"Review error\");\n        break;\n    }\n  };\n\n  const handleSubmit = async () => {\n    console.log(details, editReview);\n    let post = await axios.put(`/api/review/${details}`, {\n      brewId: brewery.id,\n      user: editReview.user,\n      title: editReview.title,\n      body: editReview.body,\n    });\n    console.log(post);\n    handleClose();\n  };\n\n  //63c76b3a3e800409cc078b83\n\n  return toggle ? (\n    <div className={`reviews-container`}>\n      <ReviewForm\n        brewery={brewery}\n        open={open}\n        setOpen={setOpen}\n        toggle={toggle}\n        setToggle={setToggle}\n      />\n      {reviews.map((review) => (\n        <div key={review._id}>\n          <h2>{review.title}</h2>\n          <h3>{review.user}</h3>\n          <p>{review.body}</p>\n          <button name={`${review._id}`} onClick={handleOpen}>\n            Edit\n          </button>\n          <button name={`${review._id}`} onClick={deleteOpen}>\n            Delete\n          </button>\n          <Dialog open={open} onClose={handleClose}>\n            <DialogContent>\n              <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"title\"\n                label=\"Title\"\n                InputLabelProps={{ shrink: true }}\n                type=\"text\"\n                fullWidth\n                variant=\"standard\"\n                onChange={handleChange}\n                required={true}\n                value={editReview.title}\n              />\n              <TextField\n                margin=\"dense\"\n                id=\"user\"\n                label=\"Name\"\n                InputLabelProps={{ shrink: true }}\n                type=\"text\"\n                fullWidth\n                variant=\"standard\"\n                onChange={handleChange}\n                required={true}\n                value={editReview.user}\n              />\n              <TextField\n                margin=\"dense\"\n                id=\"body\"\n                label=\"Review\"\n                InputLabelProps={{ shrink: true }}\n                type=\"text\"\n                fullWidth\n                variant=\"standard\"\n                onChange={handleChange}\n                required={true}\n                value={editReview.body}\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose}>Cancel</Button>\n              <Button onClick={handleSubmit}>Submit</Button>\n            </DialogActions>\n          </Dialog>\n          <Dialog open={deleteToggle} onClose={deleteClose}>\n            <DialogTitle>Alert</DialogTitle>\n            <DialogContent>\n              <DialogContentText>\n                Are you sure you want to delete this review?\n              </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => deleteClose()}>Cancel</Button>\n              <Button onClick={() => handleDelete()}>Confirm</Button>\n            </DialogActions>\n          </Dialog>\n        </div>\n      ))}\n    </div>\n  ) : (\n    <div className={`reviews-container`}>\n      <Button\n        onClick={() => {\n          setToggle(true);\n        }}\n      >\n        See Reviews\n      </Button>\n    </div>\n  );\n};\n\nexport default Reviews;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}